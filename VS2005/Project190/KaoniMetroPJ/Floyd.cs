using System;
namespace Com.JungBo.Logic{
    public class Floyd{
        private int[,] p;        
        private int[,] data;
        public string[] name;
        public string test;
        public int[] line;//1~3호선, 0은 갈아타는 역
        public string pathSt; //경유하는 역
        public int pathln;    //역을 3개식 출력할 때 사용
        public int pathTime;  //걸린 시간 
        public int preLine;   //전역의 호선
        public int lastLine;  //전 역이 있는 호선
        public int totstation;//전체 역 수
        public int changeLine;//호선을 몇 벌 갈아 탓는가
        

        public Floyd()
        {            
            BusunInit();
        }
        public void BusunInit()
        {
            name = new string[]
            {
                "율리","화명","수정","덕천","구명","구남","모라","모덕","덕포","사상",
                "감전","주례","냉정","개금","동의대앞","가야","부암","서면","전포","구포",
                "숙등","남산정","만덕","미남","사직","종합운동장","거제","연산동","물만골","온천장",
                "명륜동","동래","교대앞","시청","양정","부전동","범내골"                

                
            };
            
            data = new int[,] 
            {
                {0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//율리
                {1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//화명
                {100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//수정
                {100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//덕천//환승
                {100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//구명
                {100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//구남
                {100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//모라
                {100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//모덕
                {100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//덕포
                {100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//사상

                {100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//감전
                {100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//주례
                {100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//냉정
                {100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//개금
                {100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//동의대앞
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//가야
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//부암
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,1},//서면//환승            
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//전포
                {100,100,100,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,0,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//구포

                {100,100,100,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//숙등
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100},//남산정
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100,100},//만덕
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100,100},//미남
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100,100},//사직
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100,100},//종합운동장
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100,100,100,100,100},//거제
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,1,1,100,100,100},//연산동
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,100,100,100,100,100,100,100,100},//물만골
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,0,1,100,100,100,100,100,100},//온천장

                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100,100},//명륜동
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100,100,100,100},//동래
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,100,100,100,1,0,100,100,100,100},//교대앞
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,100,100,100,100,100,0,1,100,100},//시청
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,1,100},//양정                
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,0,100},//부전동
                {100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,1,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,0},//범내골

            };
            p = new int[data.GetLength(0), data.GetLength(0)];
            
        }        
        public void Distance()
        {
            for (int i = 0; i < data.GetLength(0); i++)
            {
                for (int j = 0; j < data.GetLength(0); j++)
                {
                    p[i, j] = -1;                   
                }
            }

            for (int k = 0; k < data.GetLength(0); k++)
            {
                for (int i = 0; i < data.GetLength(0); i++)
                {
                    for (int j = 0; j < data.GetLength(0); j++)
                    {
                        if (data[i, j] > data[i, k] + data[k, j])
                        {
                            p[i, j] = k;
                            data[i, j] = data[i, k] + data[k, j];
                        }
                    }
                }
            }

            line = new int[]
            {
                2,2,2,0,2,2,2,2,2,2,
                2,2,2,2,2,2,2,0,2,3,
                3,3,3,3,3,3,3,0,3,1,
                1,1,1,1,1,1,1
            };
        }

        ///<param name="s">출발지</param>
        ///<param name="e">도착지</param>

        public string Path(int s, int e) // 최단거리 경유지
        {
            if (p[s, e] != -1)
            {
                Path(s, p[s, e]);

                pathSt += name[p[s, e]] + "▶";
                pathTime += 2;
                pathln += 1;
                totstation += 1;
                if (pathln > 3){  //역 3개씩 출력
                    pathSt += "\n";
                    pathln = 1;
                }

                //앞에 라인 체크해서 같은호선인지 관리
                //시작하는곳이 환승역이면 이후열차를 넣어줌
                lastLine = line[p[s, e]];
                if (preLine == 0){
                    preLine = line[p[s, e]];
                }
                if (lastLine == 0){
                    lastLine = preLine;
                }
                //같은 호선이 아니면 환승
                if (preLine != lastLine){
                    pathTime += 8;//환승 8분
                    changeLine += 1;
                }
                preLine = lastLine;

                Path(p[s, e], e);

            }
            return pathSt;
           
        }


        //모든 경로 출력

        public void AllPath()
        {
            for (int i = 0; i < data.GetLength(0); i++)
            {
                for (int j = 0; j < data.GetLength(0); j++)
                {
                    if (i != j)
                    {
                        Console.Write("[{0} => {1}] : ", name[i], name[j]);
                        Console.Write("{0} => ", name[i]);
                        Path(i, j);
                        Console.Write("{0} ", name[j]);
                    }

                    Console.WriteLine();
                }
            }
        }
    }
}
