01: using System;
02: using System.Threading;
03: public class CakePlate {
04: 	private int breadCount=0;
05:     object oo = new object();//lock을 위한 멤버 개체
06: 	public CakePlate() {
07: 	}
08: 	public  void makeBread(){
09:         Monitor.Enter(oo);
10: 	    if(breadCount>=10){
11: 		    try{
12: 	            Console.WriteLine("빵이 남는다. 기다리자.");
13:                 Monitor.Wait(oo);
14: 		    }catch(Exception){}
15: 	    }
16: 	    breadCount++;//빵이 10개가 안되면 더 만들자.
17: Console.WriteLine("빵을 1개 더 만듬  총 "+breadCount+"개");
18:         Monitor.PulseAll(oo);
19:         Monitor.Exit(oo);
20: 	}
21: 	public  void eatBread(){
22:         Monitor.Enter(oo);
23: 	    if(breadCount<1){
24: 		    try{
25: 	            Console.WriteLine("빵이 모자라 기다림.");
26:                 Monitor.Wait(oo);
27: 		    }catch(Exception){}
28: 	    }
29: 	    breadCount--;//빵이 있으니 먹자.
30: 	 Console.WriteLine("빵을 1개 먹음  총 "+breadCount+"개");
31:         Monitor.PulseAll(oo);
32:         Monitor.Exit(oo);
33: 	}
34: }
